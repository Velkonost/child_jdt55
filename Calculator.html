<!DOCTYPE html>
<html> 
	<head> 
	<script src="https://code.jquery.com/jquery.min.js"></script>
	 <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<script src="calculator.js"></script>
	<script src="tarifs_for_calculator.js"></script>
	<script src="metrika.js"></script> 
	<link href="octicons.css" rel="stylesheet">
	<link href="style_for_calculator_klim.css" rel="stylesheet">

	 <!-- Для сайта -->
	<script src="/sites/jdt55/files/users/Calc_files/calculator.js.txt"></script>
	<script src="/sites/jdt55/files/users/Calc_files/metrika.js.txt"></script> 
	<script src="/sites/jdt55/files/users/Calc_files/tarifs_for_calculator.js.txt"></script>
	<link href="/sites/jdt55/files/users/Calc_files/octicons.css" rel="stylesheet">
	<link href="/sites/jdt55/files/users/Calc_files/style_for_calculator_klim.css" rel="stylesheet">
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Калькулятор грузоперевозок</title> 
	</head> 
<body> 
<div class="layer1" align="left">
		<h2 style="margin-top: 15px; margin-bottom: 3px;">Цены на доставку груза</h2>
			<p class="tarif"><a href="/sites/jdt55/files/users/admin1/prais-list_no1_zhd_perevozki.doc"><span class="span_tarif">ЖД доставка сборных грузов</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays-list_no2_avtoperevozki.xls"><span class="span_tarif">Автоперевозка сборных грузов</span></a></p><br>

			<p class="tarif"><a href="/sites/jdt55/files/users/admin3/prays-list_no4_avtoekspedirovanie_po_moskve_i_oblasti.doc"><span class="span_tarif">Автоэкспедирование грузов по г.Москва</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prais-list_no3_avtoekspedirovanie_po_omsku.doc"><span class="span_tarif">Автоэкспедирование грузов по г.Омску</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays-list_no5_dop.upakovku_gruzov_v_g.moskva_0.doc"><span class="span_tarif">Дополнительная упаковка грузов в г.Москва</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays_spb-omsk-spb.xls"><span class="span_tarif">Автоперевозка грузов Санкт-Петербург-Омск</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays-list_no6_avtoekspedirovanie_po_novosibirsku.xls"><span class="span_tarif">Автоэкспедирование грузов по г. Новосибирск</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays-list_avto-_refrizherator_iz_moskvy_v_omsk.doc"><span class="span_tarif">Перевозка автомобилем-рефрижератором в г.Омск</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/%D0%BF%D1%80%D0%B0%D0%B9%D1%81%20%D0%BD%D1%81%D0%BA-%D0%BE%D0%BC%D1%81%D0%BA.xls"><span class="span_tarif"> Автоперевозка сборных грузов из г.Новосибирска</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays_iz_omska_i_pavlodara_3.xls"><span class="span_tarif">Из Омска в Казахстан и из Павлодара в Россию</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays_iz_msk_nvs_v_kazahstan_3.xls"><span class="span_tarif">Из Москвы, Новосибирска в Казахстан</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays_iz_spb_v_kazahstan_3.xls"><span class="span_tarif">Из Санкт-Петербурга в Казахстан</span></a></p><br>
			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays_iz_ekb_i_tyumeni.xls"><span class="span_tarif">Из Екатеринбурга и Тюмени в Казахстан</span></a></p><br>
			<p>&nbsp;</p>		
</div>
<div class="artkli-calc">
	<form name="calc" class="calcin" onclick="window['yaCounter' + artkli_yandex_metrika_id].reachGoal('was_click'); return true;"> 
		<h2 style="margin-left:-15px; ">Предварительный расчет</h2>
		<div class="form-group" style="margin-bottom: 0px;">
			<div align="left" class="selector">
				<select name="artkli-from" class="artkli-from form-control" style="padding-left: 10px;">	
				</select>
			</div>
			<div align="left" class="artkli-where selector">
				<select name="artkli-where" class="artkli-where_select form-control">	
				</select>
			</div>
			<button type="button" class="artkli-butt btn btn-default"  data-toggle="tooltip" data-placement="top" title="Сброс" onclick="this.blur();"><span class="octicon octicon-x"></span>
			</button>
		</div>
				<div class="form-group" style="margin-bottom: 0px; padding-bottom: 0px;">
					<div class="artkli-chooser" align="left" style="margin-right: 10px; margin-bottom: 0px; padding-bottom: 0px;"></div>
					<div class="artkli-choose_way" align="left" style="margin-bottom: 0px; padding-bottom: 0px;" ></div>
					<br/>
				</div>
				<div class="form-group">
					<label for="artkli-massa" class="col-sm-2 control-label" style="width: 62px; margin-left: -14px; text-align: left; margin-bottom: 0px; margin-top: 5px;">Вес</label>
					<div class="col-sm-10" style="width: 200px;margin-bottom: 0px;padding-right: 0px;margin-right:0px; ">
						<input name="artkli-massa" id="artkli-massa" class="form-control artkli-massa" type="text" placeholder = "Кг" style="text-align: right;" value=""/>
					</div>
				</div>
				<div class="form-group">
					<label for="artkli-volume" class="col-sm-2 control-label" style=" width: 62px; margin-left: -14px;text-align: left; margin-top: 5px;">Объем</label>
					<div class="col-sm-10" style="width: 200px;">
						<input name= "artkli-volume" id="artkli-volume" class="form-control artkli-volume" type="text" placeholder = "Куб.м." style="text-align: right;" value=""/>
					</div>
				</div>
					<div name="result_field" class="alert alert-info artkli-result_field" style="height: 36px width: 100%; margin-right: 76px; margin-left: -15px;" role="alert"><font size="3"><span style="margin-bottom: 180px" class="artkli-result">Итог</span></font></div>		
<table border="0" class="dump-noborder form-group artkli-call" style="font-size: 12px; padding-left:12px; margin-left: -14px;">	
	<tbody>
		<tr>
			<td style="width: 22px;height: 16px; padding-bottom: 10px; ">
				<span class="octicon octicon-device-mobile" style="margin-left: 2px;vertical-align: bottom;"></span></td>
			<td style="padding-bottom: 6px;"> 
				<span style="text-align: justify;padding-bottom: 3px;" onmouseover="window['yaCounter'+artkli_yandex_metrika_id].reachGoal('focus_phone'); return true;">Позвонить: &nbsp; (3812) 45-04-39,&nbsp;&nbsp;8-913-967-98-98.</span></td>
		</tr>
		<tr>
			<td style="padding-bottom: 10px;">
				<span class="octicon octicon-mail-read" style="vertical-align: bottom;"></span></td>
			<td style="padding-bottom: 6px;">
				<span style="text-align: justify;">Написать: <a href="mailto:office@jdt55.ru" onclick="console.log(123)">office@jdt55.ru</a>.</span></td>
		</tr>
		<tr>
			<td style="padding-bottom: 10px;">
				<span class="octicon octicon-globe" style="vertical-align: bottom;"></span></td>
			<td style="padding-bottom: 6px;"> 
				<span style="text-align: justify;"><a target="_blank" href="/contact" onclick="window['yaCounter'+artkli_yandex_metrika_id].reachGoal('fill_blank'); return true;">Оставить заявку на сайте.</a></span></td>
		</tr>
	</tbody>
</table>
	</form>
	<div class="layer2" id="tarifs_links">
		<h2>Цены на доставку груза</h2>
			<p class="tarif" ><a href="/sites/jdt55/files/users/admin1/prais-list_no1_zhd_perevozki.doc"><span class="span_tarif">ЖД доставка сборных грузов</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays-list_no2_avtoperevozki.xls"><span class="span_tarif">Автоперевозка сборных грузов</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays-list_no4_avtoekspedirovanie_po_moskve_i_oblasti.doc"><span class="span_tarif">Автоэкспедирование грузов по г.Москва</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays-list_no3_avtoekspedirovanie_po_omsku.doc"><span class="span_tarif">Автоэкспедирование грузов по г.Омску</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays-list_no5_dop.upakovku_gruzov_v_g.moskva_0.doc"><span class="span_tarif">Дополнительная упаковка грузов в г.Москва</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays_spb-omsk-spb.xls"><span class="span_tarif">Автоперевозка грузов Санкт-Петербург-Омск</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays-list_no6_avtoekspedirovanie_po_novosibirsku.xls"><span class="span_tarif">Автоэкспедирование грузов по г. Новосибирск</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays-list_avto-_refrizherator_iz_moskvy_v_omsk.doc"><span class="span_tarif">Перевозка автомобилем-рефрижератором в г.Омск</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/%D0%BF%D1%80%D0%B0%D0%B9%D1%81%20%D0%BD%D1%81%D0%BA-%D0%BE%D0%BC%D1%81%D0%BA.xls"><span class="span_tarif"> Автоперевозка сборных грузов из г.Новосибирска</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays_iz_omska_i_pavlodara_3.xls"><span class="span_tarif">Из Омска в Казахстан и из Павлодара в Россию</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays_iz_msk_nvs_v_kazahstan_3.xls"><span class="span_tarif">Из Москвы, Новосибирска в Казахстан</span></a></p><br>

			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays_iz_spb_v_kazahstan_3.xls"><span class="span_tarif">Из Санкт-Петербурга в Казахстан</span></a></p><br>
			<p class="tarif" ><a href="/sites/jdt55/files/users/admin3/prays_iz_ekb_i_tyumeni.xls"><span class="span_tarif">Из Екатеринбурга и Тюмени в Казахстан</span></a></p><br>
			<p>&nbsp;</p>
	</div>
		<div class="artkli-footer" align="left" style="margin-left: -14px; margin-top: 50px;">
		<p style="font-size: 11px">	Калькулятор разработан при поддержке <a target="_blank" href="http://www.progschool.ru"><img src="http://www.progschool.ru/favicon.ico" style="vertical-align:-3px;width:16px;height:16px;margin-right:1px">Школы программиста</a>.</p>
		<p style="font-size: 11px">	Наставник: <a target="_blank" href="http://chivorotkiv.livejournal.com/">Сергей Шмаков</a></p>
	</div>
</div>
</div>
</body>
	<script>
(function() {

	function send_ya_goal_complete(call){
		if(call.className == 'dump-noborder artkli-call')
			window['yaCounter'+artkli_yandex_metrika_id].reachGoal('fill_form'); return true;
	}
	function send_ya_goal_change(){
		window['yaCounter'+artkli_yandex_metrika_id].reachGoal('change_some_fields'); return true;
	}
	$(document).ready(function(){ // Добавляет элемент
		$('[data-toggle="tooltip"]').tooltip();   
	});

	function handle_from_changed(event){
		var $calc = $('.artkli-calc');
		artkli_calculator.check_radio($calc);
		artkli_calculator.update_where($calc);
		artkli_calculator.update_from($calc);
		fill_text($calc, artkli_tarifs);
		send_ya_goal_complete($calc.find('.artkli-call')[0]);
		send_ya_goal_change();
		console.log();
	}
	function handle_where_changed(event){
		var $calc = $('.artkli-calc');
		artkli_calculator.check_radio($calc);
		artkli_calculator.update_from($calc);
		artkli_calculator.update_where($calc);
		fill_text($calc, artkli_tarifs);
		send_ya_goal_complete($calc.find('.artkli-call')[0]);
		send_ya_goal_change();
	}
	function handle_reset_changed(event){
		artkli_calculator.reset($('.artkli-calc'));
	}
	function handle_massa_and_volume_changed(event){
		var $calc = $('.artkli-calc');
		send_ya_goal_complete($calc.find('.artkli-call')[0]);
		send_ya_goal_change();
		fill_text($calc, artkli_tarifs);
		if(this.value != 0 && this.value != '.'){
			this.value = parseFloat(this.value)  || 0; 
			fill_text($calc, artkli_tarifs);
		}
	}
	function handle_radio_changed(event){
		fill_text($('.artkli-calc'), artkli_tarifs);
	}
	function init_event_handlers($calc){
		var from = $calc.find('.artkli-from')[0];
		var where = $calc.find('.artkli-where_select')[0];
		var button = $calc.find('.artkli-butt')[0];
		var massa = $calc.find('.artkli-massa')[0];
		var volume = $calc.find('.artkli-volume')[0];

		from.addEventListener('change', handle_from_changed);
		where.addEventListener('change', handle_where_changed);
		button.addEventListener('click', handle_reset_changed);
		massa.addEventListener('input', handle_massa_and_volume_changed);
		volume.addEventListener('input', handle_massa_and_volume_changed);
	}
	
	function get_tarifs(){return artkli_tarifs;} // Глобальная переменная

	
	
	
	
	function fill_text($calc, tarifs){ //Зависит от грязной, изменяет кучу всего
		var resultat;
		var result_field = $calc.find('.artkli-result_field')[0];
		var from = $calc.find('.artkli-from')[0].value;
		var where = $calc.find('.artkli-where_select')[0].value;
		var mass = $calc.find('.artkli-massa')[0];
		var volume = $calc.find('.artkli-volume')[0];
		var check_auto = from + where;
		var way = $calc.find('.artkli-way');
		var way = artkli_calculator.what_is_way(way);
			if(from == "undefined_city" && where == "undefined_city" && mass.value == 0 && volume.value == 0){
				resultat = "Итог";
				result_field.setAttribute('class','alert alert-info artkli-result_field');
			}
			else if(from == "undefined_city" ){
				resultat = "Выберите пункт отправления!";
				result_field.setAttribute('class','alert alert-warning artkli-result_field');

			}
			else if(where == "undefined_city" ){
				resultat = "Выберите пункт назначения!";
				result_field.setAttribute('class','alert alert-warning artkli-result_field');
			}
			else if(mass.value == 0){					
				resultat = "Введите вес груза!";
				result_field.setAttribute('class','alert alert-warning artkli-result_field');
				var call = $calc.find('.artkli-call')[0];
				call.setAttribute('class', 'artkli-hidden artkli-call');
			}
			else if(volume.value == 0){
				resultat = "Введите объем груза!";
				result_field.setAttribute('class','alert alert-warning artkli-result_field');
				var call = $calc.find('.artkli-call')[0];
				call.setAttribute('class', 'artkli-hidden artkli-call');
			}
			else{
					var tax = artkli_calculator.conclusion_tax(tarifs, from, where, mass.value, volume.value, way);
					var tax_by_mass = tax.by_mass;
					var tax_by_volume = tax.by_volume;

					var ans1 = tax_by_mass * mass.value;
					var ans2 = tax_by_volume * volume.value;

					if(ans1 > ans2){
						resultat = ans1;
					}
					else{
						resultat = ans2;
					}
					if(artkli_calculator.auto_way_check(from, where, tarifs)){
						if( mass.value > 5000 || volume.value >  25){
							resultat = "Цена договорная";
							result_field.setAttribute('class','alert alert-success artkli-result_field');
						}
						else{
						resultat = artkli_calculator.digit(String(Math.round(resultat)));
						result_field.setAttribute('class','alert alert-success artkli-result_field');
						var call = $calc.find('.artkli-call')[0];
						call.setAttribute('class', 'dump-noborder artkli-call');
						resultat = "Автоперевозка! Итоговая сумма: "+resultat+" руб."; 
						}
					}
					else if(isNaN(resultat)){
						resultat = " ";
					}
					else if(tax_by_volume == -2 || tax_by_mass == -2){
						resultat = "Цена договорная";
						result_field.setAttribute('class','alert alert-success artkli-result_field');
					}
					else{
						resultat = artkli_calculator.digit(String(Math.round(resultat)));
						result_field.setAttribute('class','alert alert-success artkli-result_field');
						var call = $calc.find('.artkli-call')[0];
						call.setAttribute('class', 'dump-noborder artkli-call');
						resultat = "Итоговая сумма: "+ resultat +" руб.";
					}
				}
			$calc.find('.artkli-result')[0].innerHTML = resultat;
	}
	function initialization(){
		var $calc = $('.artkli-calc');
		init_event_handlers($calc);
		artkli_calculator.reset($calc);

		var call = $calc.find('.artkli-call')[0];
		call.setAttribute('class', 'artkli-hidden artkli-call');

		artkli_calculator.update_way_dependent($calc);

		var from_cities = artkli_calculator.get_from_cities_keys(artkli_tarifs, artkli_city_names);
		var where_cities = artkli_calculator.get_where_cities(artkli_tarifs, artkli_city_names);
		
		from_cities.sort(function(a, b){
			return a < b ? -1 : a > b ? 1 : 0;
		});

		var options_html = artkli_calculator.init_build_selectors(from_cities, artkli_city_names);	
		var from_select = $calc.find('.artkli-from')[0];
		from_select.innerHTML = options_html;
		
		var options_html = artkli_calculator.init_build_selectors(where_cities, artkli_city_names);
		var where_select = $calc.find('.artkli-where_select')[0];
		where_select.innerHTML = options_html;
	}
	initialization();
})();

	</script>


	<!-- Yandex.Metrika counter -->
<script type="text/javascript">
	(function (d, w, c) {
		(w[c] = w[c] || []).push(function() {
			try {
				w['yaCounter' + artkli_yandex_metrika_id] = new Ya.Metrika({
					id:artkli_yandex_metrika_id,
					clickmap:true,
					trackLinks:true,
					accurateTrackBounce:true,
					webvisor:true
				});
			} catch(e) { }
		});

		var n = d.getElementsByTagName("script")[0],
			s = d.createElement("script"),
			f = function () { n.parentNode.insertBefore(s, n); };
		s.type = "text/javascript";
		s.async = true;
		s.src = "https://mc.yandex.ru/metrika/watch.js";

		if (w.opera == "[object Opera]") {
			d.addEventListener("DOMContentLoaded", f, false);
		} else { f(); }
	})(document, window, "yandex_metrika_callbacks");
</script>
<!-- /Yandex.Metrika counter -->



</body>
</html>






